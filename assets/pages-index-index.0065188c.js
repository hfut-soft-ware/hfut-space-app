var e=Object.defineProperty,t=(t,n)=>e(t,"name",{value:n,configurable:!0}),n=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{S as r,s,g as a,n as o,a as l,i,b as u,c,r as d,u as p,w as f,t as h,d as v,o as m,e as g,f as b,h as y,j as x,k as R,l as w,m as k,p as C,q as O,v as j,F as _,x as H,y as M,z as S,A as I,B as A,I as F,C as P,D as E,E as q,G as U,H as B,J as T}from"./index.043df7f7.js";import{_ as V,a as $}from"./sys.57827a20.js";class L extends r{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),s(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:a(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){o.batch((()=>{var t,n,r,s;if(this.mutateOptions)if(e.onSuccess)null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(s=this.mutateOptions).onSettled)||r.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var a,o,l,i;null==(a=(o=this.mutateOptions).onError)||a.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(i=this.mutateOptions).onSettled)||l.call(i,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}function z(e=""){var t;if(!(null==(t=l())?void 0:t.proxy))throw new Error("vue-query hooks can only be used inside setup() function.");const n=u(e),r=i(n);if(!r)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return r}function D(e,n,r){var s;const a=c((()=>K(e,n,r))),o=null!=(s=a.value.queryClient)?s:z(a.value.queryClientKey),l=new L(o,o.defaultMutationOptions(a.value)),i=d(l.getCurrentResult()),u=l.subscribe((e=>{p(i,e)})),g=t(((e,t)=>{l.mutate(e,t).catch((()=>{}))}),"mutate");f(a,(()=>{l.setOptions(o.defaultMutationOptions(a.value))}),{deep:!0}),m((()=>{u()}));return{...h(v(i)),mutate:g,mutateAsync:i.mutate,reset:i.reset}}function K(e,t,n){const r=g(e)?e.value:e,s=g(t)?t.value:t;let a=r;if(b(r))if("function"==typeof s){a={...g(n)?n.value:n,mutationKey:r,mutationFn:s}}else a={...s,mutationKey:r};return"function"==typeof r&&(a={...s,mutationFn:r}),y(a)}t(L,"MutationObserver"),t(z,"useQueryClient"),t(D,"useMutation"),t(K,"parseMutationArgs");var G;function J(e){return"function"==typeof e?e():x(e)}function N(e,n){function r(...t){e((()=>n.apply(this,t)),{fn:n,thisArg:this,args:t})}return t(r,"wrapper"),r}function Q(e,n={}){let r,s;return t((t=>{const a=J(e),o=J(n.maxWait);if(r&&clearTimeout(r),a<=0||void 0!==o&&o<=0)return s&&(clearTimeout(s),s=null),t();o&&!s&&(s=setTimeout((()=>{r&&clearTimeout(r),s=null,t()}),o)),r=setTimeout((()=>{s&&clearTimeout(s),s=null,t()}),a)}),"filter")}function W(e,t=200,n={}){return N(Q(t,n),e)}"undefined"!=typeof window&&(null==(G=null==window?void 0:window.navigator)?void 0:G.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent),t(J,"resolveUnref"),t(N,"createFilterWrapper"),t(Q,"debounceFilter"),t(W,"useDebounceFn");class X{constructor(){n(this,"handlers",[]),this.forEach={asc:e=>{for(let t=0,n=this.handlers.length;t<n;t++)null!==this.handlers[t]&&e(this.handlers[t])},desc:e=>{for(let t=this.handlers.length-1;t>=0;t--)null!==this.handlers[t]&&e(this.handlers[t])}}}use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}}function Y(){const e=t((function e(t){return Reflect.construct(Promise,[t],e)}),"Request");return Object.setPrototypeOf(e,Promise),e.prototype=Object.create(Promise.prototype),e.prototype.constructor=e,e.task=null,e.aborted=!1,e.onHeadersReceivedCallback=null,e.offHeadersReceivedCallback=null,e.onHeadersReceived=t((function(t){var n,r;"function"==typeof t&&(e.onHeadersReceivedCallback=t),e.onHeadersReceivedCallback&&e.task&&(null==(r=(n=e.task).onHeadersReceived)||r.call(n,e.onHeadersReceivedCallback))}),"onHeadersReceived"),e.offHeadersReceived=t((function(t){var n,r;"function"==typeof t&&(e.offHeadersReceivedCallback=t),e.offHeadersReceivedCallback&&e.task&&(null==(r=(n=e.task).offHeadersReceived)||r.call(n,e.offHeadersReceivedCallback))}),"offHeadersReceived"),e.prototype.abort=t((function(){var t;return e.aborted=!0,null==(t=e.task)||t.abort(),this}),"abort"),e.prototype.onHeadersReceived=t((function(t){return e.onHeadersReceived(t),this}),"onHeadersReceived"),e.prototype.offHeadersReceived=t((function(t){return e.offHeadersReceived(t),this}),"offHeadersReceived"),e}t(X,"InterceptorManager"),t(Y,"RequestConstructor");const Z=Object.prototype.toString;function ee(e){return"[object Array]"===Z.call(e)}function te(e){return"[object Object]"===Z.call(e)}function ne(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),ee(e))for(let n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function re(...e){const t={};for(let n=0,r=e.length;n<r;n++)te(e[n])&&ne(e[n],((e,n)=>{t[n]=se(t[n],e)}));return t}function se(e,t){return te(e)&&te(t)?re(e,t):te(t)?re({},t):ee(t)?t.slice():t}function ae(e){return function(...t){try{return e.apply(e,t)}catch(n){console.error(n)}}}function oe(e="",t=""){return/^https?:\/\//.test(t)?t:t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function le(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ie(e,t){let n;const r=[];if(ne(t,((e,t)=>{null!=e&&(ee(e)?t+="[]":e=[e],ne(e,(e=>{null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),r.push(le(t)+"="+le(e))})))})),n=r.join("&"),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}function ue({baseURL:e,url:t,params:n,query:r}={}){let s=oe(e,t);return n||r?(n&&(/\/:/.test(s)?ne(n,((e,t)=>{s=s.replace(`/:${t}`,`/${le(String(e))}`)})):r||(s=ie(s,n))),r&&(s=ie(s,r)),s):s}function ce(e){return["success","fail","complete"].includes(e)}function de(e,t,n){let r=null;const s={},a="object"==typeof e;return ne(a?e:{...n,url:e,data:t},((e,t)=>{a&&ce(t)?(r||(r={}))[t]=ae(e):s[t]=e})),{callback:r,config:s}}function pe(e={},t={}){const n={};return ne(Object.keys({...e,...t}),(r=>{void 0!==t[r]?n[r]=se(e[r],t[r]):void 0!==e[r]&&(n[r]=se(void 0,e[r]))})),n}async function fe(...e){let t={};for(let n=0,r=e.length;n<r;n++){t=pe(t,"function"==typeof e[n]?await e[n]():e[n])}return t.method=t.method.toUpperCase(),t}function he(e,t){return new Promise(((n,r)=>{var s;if(t.aborted)return r({config:e,errMsg:"request:fail abort"});t.task=R({...e,complete:t=>{const s={config:e,...t};!e.validateStatus||e.validateStatus(t.statusCode)?n(s):r(s)}}),t.onHeadersReceived(),t.offHeadersReceived(),null==(s=e.xhr)||s.call(e,t.task,e)}))}t(ee,"isArray"),t(te,"isPlainObject"),t(ne,"forEach"),t(re,"merge$1"),t(se,"assign"),t(ae,"tryCatch"),t(oe,"combineURL"),t(le,"encode"),t(ie,"querystring"),t(ue,"buildURL"),t(ce,"isCallback"),t(de,"detachConfig"),t(pe,"merge"),t(fe,"mergeConfig"),t(he,"adapter");const ve=["get","post","put","delete","connect","head","options","trace"],me=["common",...ve],ge={adapter:he,header:{},method:"GET",validateStatus:e=>e>=200&&e<300};function be(e){return t=>(t.url=ue(t),t.method=(t.method||"get").toUpperCase(),t.header=re(t.header.common,t.header[t.method.toLowerCase()],t.header),ne(me,(e=>te(t.header[e])&&delete t.header[e])),ne(t,((e,n)=>ce(n)&&delete t[n])),t.adapter(t,e))}ne(me,(e=>ge.header[e]={})),t(be,"dispatchRequest");const ye=Symbol("$$cancel");function xe(e){return null!=e&&Object.prototype.hasOwnProperty.call(e,ye)}function Re(e){return Promise.reject({[ye]:e})}function we(e){return e&&(t=>xe(t)?Promise.reject(t):e(t))}function ke(e){return Promise.reject(xe(e)?e[ye]:e)}function Ce(e){const n="object"==typeof e?re(e):e;function r(...t){const{callback:n,config:s}=de(...t),a=Y(),o=[be(a),Re];r.interceptors.request.forEach.desc((({fulfilled:e,rejected:t})=>o.unshift(e,t))),r.interceptors.response.forEach.asc((({fulfilled:e,rejected:t})=>o.push(e,we(t)))),o.unshift((t=>fe(ge,e,t)),void 0),o.push(void 0,ke),o.push((e=>{var t,r;if(!n)return e;null==(t=n.success)||t.call(n,e),null==(r=n.complete)||r.call(n,e)}),(e=>{var t,r;if(!n)return Promise.reject(e);null==(t=n.fail)||t.call(n,e),null==(r=n.complete)||r.call(n,e)}));let l=a.resolve(s);for(;o.length;)l=l.then(o.shift(),o.shift());return l}return r.config=Object.freeze(n),r.defaults=ge,r.interceptors={request:new X,response:new X},r.getURL=t((async function(t){return ue(await fe(ge,e,t)).replace(/^\?/,"")}),"getURL"),ne(ve,(e=>{r[e]=function(t,n,s){return"string"==typeof t?r(t,n,{...s,method:e}):r({...t,method:e})}})),t(r,"ajax"),r}t(xe,"hasCancel"),t(Re,"dispatchCancel"),t(we,"interceptCancel"),t(ke,"detachCancel"),t(Ce,"Ajax");const Oe=Ce();Oe.create=t((function(e){return Ce(e)}),"create");var je=Object.defineProperty,_e=t(((e,t)=>je(e,"name",{value:t,configurable:!0})),"__name");function He(e){return Oe({url:"https://www.hfut-space.top:1145/v2/login",method:"POST",data:e})}t(He,"loginRequest"),_e(He,"loginRequest");var Me=V(w({__name:"MuiButton",props:{loading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const r=e;let s=k(!1);const a=t((e=>{n("click",e),s.value=!0,setTimeout((()=>{s.value=!1}),500)}),"onClick");return(e,t)=>(C(),O("div",{class:S(["bg-[#00AB55]",[r.loading?"!bg-[#E5E8EB]":"mui-button"]]),relative:"","text-white":"",px5:"",py3:"","rounded-lg":"","flex-center":"","font-bold":"","overflow-hidden":"","transition-all":"",onClick:a},[r.loading?(C(),O("div",{key:0,center:"","text-2xl":""},[j("div",{absolute:"","animate-spin":"",class:"text-black/10 i-ri:loader-4-line"}),j("div",{"animate-spin":"",class:"text-black/20 i-ri:loader-5-line"})])):(C(),O(_,{key:1},[H(e.$slots,"default",{},void 0,!0),s.value?(C(),O("div",{key:0,class:"ripple"})):M("v-if",!0)],64))],2))}}),[["__scopeId","data-v-1b0ed52a"]]);const Se=w({__name:"MuiInput",props:{type:{type:String,default:"text"},placeholder:String,error:{type:Boolean,default:!1},helperText:{type:String,default:""},modelValue:{type:String,default:""}},emits:["update:modelValue","change","input"],setup(e,{emit:n}){const r=e;let s=k(!1);const a=t((e=>{n("update:modelValue",e.detail.value),n("input")}),"emitOnInput");return(e,t)=>{var n;const o=F;return C(),O("div",null,[j("div",{border:"",py4:"",px3:"","rounded-lg":"","transition-all":"","border-2":"",class:S(["text-[#212B36]",[s.value?"border-[#00AB55]":"border-[#919EAB]/45",{"!border-[#FF5630]":r.error}]])},[I(o,{type:r.type,placeholder:r.placeholder,value:r.modelValue,"text-sm":"",onInput:a,onFocus:t[0]||(t[0]=e=>s.value=!0),onBlur:t[1]||(t[1]=e=>s.value=!1)},null,8,["type","placeholder","value"])],2),r.error&&(null==(n=r.helperText)?void 0:n.length)?(C(),O("div",{key:0,px2:"",pt1:"",class:"text-[#FF5630]","text-xs":""},A(r.helperText),1)):M("v-if",!0)])}}}),Ie=w({__name:"Link",props:{href:String},setup(e){const n=e,r=t((()=>{P.to("/pages/web-view/index",{url:n.href})}),"handleLinkClick");return(e,t)=>(C(),O("div",{"font-bold":"",class:"text-[#00AB55] text-xs",onClick:r},[H(e.$slots,"default")]))}}),Ae=w({__name:"Alert",setup:e=>(e,t)=>(C(),O("div",{mt2:"",p3:"","rounded-lg":"",flex:"",gap2:"",class:"bg-#D0F2FF"},[j("div",{class:"icon text-[#2B9AFF]","i-ri-information-fill":"","inline-block":"","text-lg":""}),j("p",{class:"text-#04297A","flex-center-col":"","text-xs":"","text-sm":""},[H(e.$slots,"default")])]))});var Fe=V(w({__name:"index",setup(e){let n=d({studentId:"",password:""}),r=d({studentId:"",password:""}),s=k(!1);const a=D(He,{onSuccess(e){console.log(e)},onSettled(){s.value=!1}}),o=t(((e=!0,s=!0)=>{const a=t((()=>{var e;""===n.studentId?r.studentId="学号不能为空":10!==(null==(e=n.studentId)?void 0:e.length)?r.studentId="学号长度是10位":r.studentId=""}),"validateStudentId"),o=t((()=>{var e;""===n.password?r.password="密码不能为空":(null==(e=n.password)?void 0:e.length)<6?r.password="密码长度至少为6位":r.password=""}),"validatePassword");s?(a(),o()):e?a():o()}),"validate"),l=W((()=>{o();Object.keys(r).every((e=>{var t;return!(null==(t=r[e])?void 0:t.length)}))&&(s.value=!0,setTimeout((()=>{a.mutate(n)}),1e3))}),200);return(e,t)=>{const a=B(T("sys"),$);return C(),E(a,null,{default:q((()=>{var e,a;return[j("div",{grid:"",gap4:"",p5:""},[j("header",{grid:"",gap4:""},[j("img",{src:"./assets/logo.92eef59a.png","rounded-full":"","h-100px":"","w-100px":""}),j("div",{grid:"",gap3:""},[j("p",{"font-bold":"","text-xl":""}," 登录HFUTSpace "),j("p",{"text-holder":"","text-xs":""}," 请输入信息门户账号与密码 ")]),j("div",{gap2:""},[I(Ae,null,{default:q((()=>[U("密码输错太多次是会被教务暂时冻结五分钟的哦")])),_:1}),I(Ae,null,{default:q((()=>[U("没有教务系统是不能登入的哦")])),_:1})])]),j("div",{grid:"",gap5:""},[I(Se,{modelValue:x(n).studentId,"onUpdate:modelValue":t[0]||(t[0]=e=>x(n).studentId=e),type:"number",placeholder:"请输入你的学号",error:!!(null==(e=x(r).studentId)?void 0:e.length),"helper-text":x(r).studentId,onInput:t[1]||(t[1]=e=>o(!0,!1))},null,8,["modelValue","error","helper-text"]),I(Se,{modelValue:x(n).password,"onUpdate:modelValue":t[2]||(t[2]=e=>x(n).password=e),type:"password",placeholder:"请输入你的信息门户密码",error:!!(null==(a=x(r).password)?void 0:a.length),"helper-text":x(r).password,onInput:t[3]||(t[3]=e=>o(!1,!1))},null,8,["modelValue","error","helper-text"]),j("div",{flex:"","justify-end":""},[I(Ie,{href:"https://cas.hfut.edu.cn/cas/forget?service=https://cas.hfut.edu.cn/cas/oauth2.0/callbackAuthorize?client_id=BsHfutEduPortal&redirect_uri=https%3A%2F%2Fone.hfut.edu.cn%2F&response_type=code&client_name=CasOAuthClient"},{default:q((()=>[U(" 忘记密码了？点我找回 ")])),_:1})]),I(Me,{loading:s.value,onClick:x(l)},{default:q((()=>[U(" 登录 ")])),_:1},8,["loading","onClick"])])])]})),_:1})}}}),[["__scopeId","data-v-e3af7456"]]);export{Fe as default};
