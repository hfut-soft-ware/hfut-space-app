var e=Object.defineProperty,t=(t,n)=>e(t,"name",{value:n,configurable:!0}),n=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{S as r,s,g as o,n as a,a as i,i as l,b as u,c,r as d,u as p,w as f,t as h,d as v,o as m,e as g,f as y,h as b,j as x,k as w,l as R,m as O,p as j,q as k,F as C,v as _,x as F,y as M,z as S,A as E,I,B as P,C as A,D as H,E as B,G as q,H as U}from"./index.05b5969f.js";import{_ as T,a as V}from"./sys.fcea0710.js";class $ extends r{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.client.defaultMutationOptions(e),s(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:o(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.batch((()=>{var t,n,r,s;if(this.mutateOptions)if(e.onSuccess)null==(t=(n=this.mutateOptions).onSuccess)||t.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(r=(s=this.mutateOptions).onSettled)||r.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var o,a,i,l;null==(o=(a=this.mutateOptions).onError)||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(i=(l=this.mutateOptions).onSettled)||i.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)}))}))}}function L(e=""){var t;if(!(null==(t=i())?void 0:t.proxy))throw new Error("vue-query hooks can only be used inside setup() function.");const n=u(e),r=l(n);if(!r)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return r}function D(e,n,r){var s;const o=c((()=>z(e,n,r))),a=null!=(s=o.value.queryClient)?s:L(o.value.queryClientKey),i=new $(a,a.defaultMutationOptions(o.value)),l=d(i.getCurrentResult()),u=i.subscribe((e=>{p(l,e)})),g=t(((e,t)=>{i.mutate(e,t).catch((()=>{}))}),"mutate");f(o,(()=>{i.setOptions(a.defaultMutationOptions(o.value))}),{deep:!0}),m((()=>{u()}));return{...h(v(l)),mutate:g,mutateAsync:l.mutate,reset:l.reset}}function z(e,t,n){const r=g(e),s=g(t);let o=r;if(y(r))if("function"==typeof s){o={...g(n),mutationKey:r,mutationFn:s}}else o={...s,mutationKey:r};return"function"==typeof r&&(o={...s,mutationFn:r}),b(o)}t($,"MutationObserver"),t(L,"useQueryClient"),t(D,"useMutation"),t(z,"parseMutationArgs");var K;const G="undefined"!=typeof window,N=t((()=>{}),"noop");function Q(e){return"function"==typeof e?e():g(e)}function W(e,n){function r(...t){return new Promise(((r,s)=>{Promise.resolve(e((()=>n.apply(this,t)),{fn:n,thisArg:this,args:t})).then(r).catch(s)}))}return t(r,"wrapper"),r}function J(e,n={}){let r,s,o=N;const a=t((e=>{clearTimeout(e),o(),o=N}),"_clearTimeout");return t((t=>{const i=Q(e),l=Q(n.maxWait);return r&&a(r),i<=0||void 0!==l&&l<=0?(s&&(a(s),s=null),Promise.resolve(t())):new Promise(((e,u)=>{o=n.rejectOnCancel?u:e,l&&!s&&(s=setTimeout((()=>{r&&a(r),s=null,e(t())}),l)),r=setTimeout((()=>{s&&a(s),s=null,e(t())}),i)}))}),"filter")}function X(e,t=200,n={}){return W(J(t,n),e)}G&&(null==(K=null==window?void 0:window.navigator)?void 0:K.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent),t(Q,"resolveUnref"),t(W,"createFilterWrapper"),t(J,"debounceFilter"),t(X,"useDebounceFn");class Y{constructor(){n(this,"handlers",[])}use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}forEach(e,t=!1){if(t)for(let n=this.handlers.length-1;n>=0;n--)null!==this.handlers[n]&&e(this.handlers[n]);else for(let n=0,r=this.handlers.length;n<r;n++)null!==this.handlers[n]&&e(this.handlers[n])}}function Z(){function e(t){return Reflect.construct(Promise,[t],e)}return t(e,"Request"),Object.setPrototypeOf(e,Promise),e.prototype=Object.create(Promise.prototype),e.prototype.constructor=e,e.prototype.abort=t((function(){var t;return e.aborted=!0,null==(t=e.task)||t.abort(),this}),"abort"),e.prototype.onHeadersReceived=t((function(t){var n,r;return"function"==typeof t&&(e.onHeadersReceived=t),e.onHeadersReceived&&e.task&&(null==(r=(n=e.task).onHeadersReceived)||r.call(n,e.onHeadersReceived)),this}),"onHeadersReceived"),e.prototype.offHeadersReceived=t((function(t){var n,r;return"function"==typeof t&&(e.offHeadersReceived=t),e.offHeadersReceived&&e.task&&(null==(r=(n=e.task).offHeadersReceived)||r.call(n,e.offHeadersReceived)),this}),"offHeadersReceived"),e}t(Y,"InterceptorManager"),t(Z,"RequestConstructor");const ee=Object.prototype.toString;function te(e){return"[object Array]"===ee.call(e)}function ne(e){return"[object Object]"===ee.call(e)}function re(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),te(e))for(let n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function se(...e){const t={};for(let n=0,r=e.length;n<r;n++)ne(e[n])&&re(e[n],((e,n)=>{t[n]=oe(t[n],e)}));return t}function oe(e,t){return ne(e)&&ne(t)?se(e,t):ne(t)?se({},t):te(t)?t.slice():t}function ae(e){return function(...t){try{return e.apply(e,t)}catch(n){console.error(n)}}}function ie(e="",t=""){return/^https?:\/\//.test(t)?t:t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function le(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ue(e,t){let n;const r=[];if(re(t,((e,t)=>{null!=e&&(te(e)?t+="[]":e=[e],re(e,(e=>{null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),r.push(le(t)+"="+le(e))})))})),n=r.join("&"),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}function ce({baseURL:e,url:t,params:n,query:r}={}){let s=ie(e,t);return n||r?(n&&(/\/:/.test(s)?re(n,((e,t)=>{s=s.replace(`/:${t}`,`/${le(String(e))}`)})):r||(s=ue(s,n))),r&&(s=ue(s,r)),s):s}function de(e){return["success","fail","complete"].includes(e)}function pe(e,t,n){let r=null;const s={},o="object"==typeof e;return re(o?e:{...n,url:e,data:t},((e,t)=>{o&&de(t)?(r||(r={}))[t]=ae(e):s[t]=e})),{callback:r,config:s}}function fe(e={},t={}){const n={};return re(Object.keys({...e,...t}),(r=>{void 0!==t[r]?n[r]=oe(e[r],t[r]):void 0!==e[r]&&(n[r]=oe(void 0,e[r]))})),n}async function he(...e){let t={};for(let n=0,r=e.length;n<r;n++){t=fe(t,"function"==typeof e[n]?await e[n]():e[n])}return t.method=t.method.toUpperCase(),t}function ve(e,t){return new Promise(((n,r)=>{var s;if(t.aborted)return r({config:e,errMsg:"request:fail abort"});t.task=x({...e,complete:t=>{const s={config:e,...t};!e.validateStatus||e.validateStatus(t.statusCode)?n(s):r(s)}}),t.prototype.onHeadersReceived(),t.prototype.offHeadersReceived(),null==(s=e.xhr)||s.call(e,t.task,e)}))}t(te,"isArray"),t(ne,"isPlainObject"),t(re,"forEach"),t(se,"merge$1"),t(oe,"assign"),t(ae,"tryCatch"),t(ie,"combineURL"),t(le,"encode"),t(ue,"querystring"),t(ce,"buildURL"),t(de,"isCallback"),t(pe,"detachConfig"),t(fe,"merge"),t(he,"mergeConfig"),t(ve,"adapter");const me=["get","post","put","delete","connect","head","options","trace"],ge=["common",...me],ye={adapter:ve,header:{},method:"GET",validateStatus:e=>e>=200&&e<300};function be(e){return t=>(t.url=ce(t),t.method=(t.method||"get").toUpperCase(),t.header=se(t.header.common,t.header[t.method.toLowerCase()],t.header),re(ge,(e=>ne(t.header[e])&&delete t.header[e])),re(t,((e,n)=>de(n)&&delete t[n])),t.adapter(t,e))}re(ge,(e=>ye.header[e]={})),t(be,"dispatchRequest");const xe=Symbol("$$cancel");function we(e){return null!=e&&Object.prototype.hasOwnProperty.call(e,xe)}function Re(e){return Promise.reject({[xe]:e})}function Oe(e){return e&&(t=>we(t)?Promise.reject(t):e(t))}function je(e){return Promise.reject(we(e)?e[xe]:e)}function ke(e){const n="object"==typeof e?se(e):e;function r(...t){const{callback:n,config:s}=pe(...t),o=Z(),a=[be(o),Re];r.interceptors.request.forEach((({fulfilled:e,rejected:t})=>a.unshift(e,t)),!0),r.interceptors.response.forEach((({fulfilled:e,rejected:t})=>a.push(e,Oe(t))),!1),a.unshift((t=>he(ye,e,t)),void 0),a.push(void 0,je),a.push((e=>{var t,r;if(!n)return e;null==(t=n.success)||t.call(n,e),null==(r=n.complete)||r.call(n,e)}),(e=>{var t,r;if(!n)return Promise.reject(e);null==(t=n.fail)||t.call(n,e),null==(r=n.complete)||r.call(n,e)}));let i=o.resolve(s);for(;a.length;)i=i.then(a.shift(),a.shift());return i}return r.config=Object.freeze(n),r.defaults=ye,r.interceptors={request:new Y,response:new Y},r.getURL=t((async function(t){return ce(await he(ye,e,t)).replace(/^\?/,"")}),"getURL"),re(me,(e=>{r[e]=function(t,n,s){return"string"==typeof t?r(t,n,{...s,method:e}):r({...t,method:e})}})),t(r,"ajax"),r}t(we,"hasCancel"),t(Re,"dispatchCancel"),t(Oe,"interceptCancel"),t(je,"detachCancel"),t(ke,"Ajax");const Ce=ke();Ce.create=t((function(e){return ke(e)}),"create");var _e=Object.defineProperty,Fe=t(((e,t)=>_e(e,"name",{value:t,configurable:!0})),"__name");function Me(e){return Ce({url:"https://www.hfut-space.top:1145/v2/login",method:"POST",data:e})}t(Me,"loginRequest"),Fe(Me,"loginRequest");var Se=T(w({__name:"MuiButton",props:{loading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const r=e;let s=R(!1);const o=t((e=>{r.loading||(n("click",e),s.value=!0),setTimeout((()=>{s.value=!1}),500)}),"onClick");return(e,t)=>(O(),j("div",{class:M(["bg-[#00AB55]",[r.loading?"!bg-[#E5E8EB]":"mui-button"]]),relative:"","text-white":"",px5:"",py3:"","rounded-lg":"","flex-center":"","font-bold":"","overflow-hidden":"","transition-all":"",onClick:o},[r.loading?(O(),j("div",{key:0,center:"","text-2xl":""},[k("div",{absolute:"","animate-spin":"",class:"text-black/10 i-ri:loader-4-line"}),k("div",{"animate-spin":"",class:"text-black/20 i-ri:loader-5-line"})])):(O(),j(C,{key:1},[_(e.$slots,"default",{},void 0,!0),s.value?(O(),j("div",{key:0,class:"ripple"})):F("v-if",!0)],64))],2))}}),[["__scopeId","data-v-11b171ea"]]);const Ee=w({__name:"MuiInput",props:{type:{type:String,default:"text"},placeholder:String,error:{type:Boolean,default:!1},helperText:{type:String,default:""},modelValue:{type:String,default:""}},emits:["update:modelValue","change","input"],setup(e,{emit:n}){const r=e;let s=R(!1);const o=t((e=>{n("update:modelValue",e.detail.value),n("input")}),"emitOnInput");return(e,t)=>{var n;const a=I;return O(),j("div",null,[k("div",{border:"",py4:"",px3:"","rounded-lg":"","transition-all":"","border-2":"",class:M(["text-[#212B36]",[s.value?"border-[#00AB55]":"border-[#919EAB]/45",{"!border-[#FF5630]":r.error}]])},[S(a,{type:r.type,placeholder:r.placeholder,value:r.modelValue,"text-sm":"",onInput:o,onFocus:t[0]||(t[0]=e=>s.value=!0),onBlur:t[1]||(t[1]=e=>s.value=!1)},null,8,["type","placeholder","value"])],2),r.error&&(null==(n=r.helperText)?void 0:n.length)?(O(),j("div",{key:0,px2:"",pt1:"",class:"text-[#FF5630]","text-xs":""},E(r.helperText),1)):F("v-if",!0)])}}}),Ie=w({__name:"Link",props:{href:String},setup(e){const n=e,r=t((()=>{P.to("/pages/web-view/index",{url:n.href})}),"handleLinkClick");return(e,t)=>(O(),j("div",{"font-bold":"",class:"text-[#00AB55] text-xs",onClick:r},[_(e.$slots,"default")]))}}),Pe=w({__name:"Alert",props:{variant:{type:String,default:"info"}},setup(e){const t=c((()=>({bg:{"bg-#D8FBDE":"success"===e.variant,"bg-#FFE7D9":"error"===e.variant,"bg-#D0F2FF":"info"===e.variant},text:{"text-#0A5554":"success"===e.variant,"text-#7A0C2E":"error"===e.variant,"text-#04297A":"info"===e.variant},icon:{"text-#FF4842 i-ri-information-fill":"error"===e.variant,"text-#2B9AFF i-ri-information-fill":"info"===e.variant,"text-#36B37E i-ri:checkbox-circle-fill":"success"===e.variant}})));return(e,n)=>(O(),j("div",{mt2:"",px3:"",py4:"","rounded-lg":"",flex:"",gap2:"",class:M(t.value.bg)},[k("div",{class:M(t.value.icon),"inline-block":"","text-2xl":""},null,2),k("p",{class:M(t.value.text),"flex-center-col":"","text-xs":"","text-sm":""},[_(e.$slots,"default")],2)],2))}});var Ae=T(w({__name:"index",setup(e){let n=d({studentId:"",password:""}),r=d({studentId:"",password:""}),s=R(!1),o=R(!1);const a=D(Me,{onSuccess(e){console.log(e)},onError(e){o.value=!0,console.log(e)},onSettled(){s.value=!1}}),i=t(((e=!0,s=!0)=>{const o=t((()=>{var e;""===n.studentId?r.studentId="学号不能为空":10!==(null==(e=n.studentId)?void 0:e.length)?r.studentId="学号长度是10位":r.studentId=""}),"validateStudentId"),a=t((()=>{var e;""===n.password?r.password="密码不能为空":(null==(e=n.password)?void 0:e.length)<6?r.password="密码长度至少为6位":r.password=""}),"validatePassword");s?(o(),a()):e?o():a()}),"validate"),l=X((()=>{i();Object.keys(r).every((e=>{var t;return!(null==(t=r[e])?void 0:t.length)}))&&(s.value=!0,setTimeout((()=>{a.mutate(n)}),1e3))}),200);return(e,t)=>{const a=q(U("sys"),V);return O(),A(a,null,{default:H((()=>{var e,a;return[k("div",{"w-screen":"","h-screen":"","x-center":""},[k("div",{grid:"",gap4:"",p5:"","md:max-w-800px":""},[k("header",{grid:"",gap4:""},[k("img",{src:"./assets/logo.92eef59a.png","rounded-full":"","h-100px":"","w-100px":""}),k("div",{grid:"",gap3:""},[k("p",{"font-bold":"","text-xl":""}," 登录HFUTSpace "),k("p",{"text-holder":"","text-xs":"",class:"text-success-primary"}," 请输入信息门户账号与密码 ")]),k("div",{gap2:""},[S(Pe,{variant:"info"},{default:H((()=>[B(" 密码输错太多次是会被教务暂时冻结五分钟的哦 ")])),_:1})]),o.value?(O(),j("div",{key:0,gap2:""},[S(Pe,{variant:"info"},{default:H((()=>[B(" 密码输错太多次是会被教务暂时冻结五分钟的哦 ")])),_:1})])):F("v-if",!0)]),k("div",{grid:"",gap5:""},[S(Ee,{modelValue:g(n).studentId,"onUpdate:modelValue":t[0]||(t[0]=e=>g(n).studentId=e),type:"number",placeholder:"请输入你的学号",error:!!(null==(e=g(r).studentId)?void 0:e.length),"helper-text":g(r).studentId,onInput:t[1]||(t[1]=e=>i(!0,!1))},null,8,["modelValue","error","helper-text"]),S(Ee,{modelValue:g(n).password,"onUpdate:modelValue":t[2]||(t[2]=e=>g(n).password=e),type:"password",placeholder:"请输入你的信息门户密码",error:!!(null==(a=g(r).password)?void 0:a.length),"helper-text":g(r).password,onInput:t[3]||(t[3]=e=>i(!1,!1))},null,8,["modelValue","error","helper-text"]),k("div",{flex:"","justify-end":""},[S(Ie,{underline:"",href:"https://cas.hfut.edu.cn/cas/forget?service=https://cas.hfut.edu.cn/cas/oauth2.0/callbackAuthorize?client_id=BsHfutEduPortal&redirect_uri=https%3A%2F%2Fone.hfut.edu.cn%2F&response_type=code&client_name=CasOAuthClient"},{default:H((()=>[B(" 忘记密码了？点我找回 ")])),_:1})]),S(Se,{loading:s.value,onClick:g(l)},{default:H((()=>[B(" 登录 ")])),_:1},8,["loading","onClick"])])])])]})),_:1})}}}),[["__scopeId","data-v-a2547704"]]);export{Ae as default};
